do_stuff:
    CP r1, r2
    JALA r0, r31, 0a
just_read:
    JALA r0, r31, 0a
main:
    ADDI64 r254, r254, -96d
    ST r31, r254, 48a, 48h
    ADDI64 r32, r254, 16d
    CP r1, r32
    JAL r31, r0, :optionala
    CP r2, r32
    LD r33, r254, 16a, 8h
    JNE r33, r0, :0
    LI64 r1, 10d
    JMP :1
 0: ST r0, r254, 24a, 8h
    JAL r31, r0, :just_read
    LD r2, r254, 24a, 8h
    JAL r31, r0, :do_stuff
    CP r34, r1
    ADDI64 r35, r254, 0d
    JAL r31, r0, :optional
    ST r1, r35, 0a, 16h
    LD r36, r254, 0a, 1h
    ANDI r36, r36, 255d
    ANDI r0, r0, 255d
    JNE r36, r0, :2
    LI64 r1, 20d
    JMP :1
 2: LI64 r2, 100d
    JAL r31, r0, :do_stuff
    ADD64 r1, r1, r34
 1: LD r31, r254, 48a, 48h
    ADDI64 r254, r254, 96d
    JALA r0, r31, 0a
optional:
    ADDI64 r254, r254, -16d
    LI8 r6, 1b
    ADDI64 r5, r254, 0d
    ST r6, r254, 0a, 1h
    LI64 r6, 10d
    ST r6, r254, 8a, 8h
    LD r1, r5, 0a, 16h
    ADDI64 r254, r254, 16d
    JALA r0, r31, 0a
optionala:
    ADDI64 r254, r254, -48d
    ADDI64 r7, r254, 8d
    ADDI64 r6, r254, 16d
    ST r7, r254, 16a, 8h
    LI64 r10, 1d
    ST r10, r254, 24a, 8h
    ADDI64 r2, r254, 0d
    ST r2, r254, 32a, 8h
    ST r0, r254, 0a, 8h
    ST r0, r254, 8a, 8h
    ST r0, r254, 40a, 8h
    BMC r6, r1, 32h
    ADDI64 r254, r254, 48d
    JALA r0, r31, 0a
code size: 554
ret: 100
status: Ok(())
